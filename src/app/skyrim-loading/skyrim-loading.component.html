<th-canvas [thStats]="true" (onRender)="onBeforeRender()" >
    <th-scene #scene>
    <!--
    <th-pointLight
      [castShadow]="false"
      [shadowMapHeight]="1024"
      [shadowMapWidth]="1024"
    ></th-pointLight>
    -->
        <th-ambientLight [color]="['#808080']"> </th-ambientLight>
        <th-directionalLight
            [color]="'#ffffff' | color"
            [intensity]="0.75" >
        </th-directionalLight>

        <th-mesh *ngFor="let p of points"
            [position]="p" >
            <th-meshBasicMaterial>
                <th-boxGeometry></th-boxGeometry>
            </th-meshBasicMaterial>
        </th-mesh>

        <th-mesh [castShadow]="false" [receiveShadow]="false"
            *ngFor="let data of smokeData"
            [geometry]="geometry.objRef"
            [material]="data.material"
            [position]="data.pos"
            [rotation]="data.rotation"
            [scale]="data.scale" >
            <!-- Intead of putting the geometry here, we bind it by objRef so we can reuse the same reference intead of making copies-->
        </th-mesh>

        <th-planeGeometry #geometry [args]="[SMOKE_SIZE, SMOKE_SIZE]">
        </th-planeGeometry>
    
        <th-object3D
            loadGLTF
            [url]="assetPath"
            [rotation]="catRotation"
            [position]="catPosition" >
        </th-object3D>
        
        <!--
        <th-hemisphereLight [color]="'#aabbcc' | color" ></th-hemisphereLight>
        [lookAt]="this.catPosition"
        [args]="[45, 1, 0.1, 10000]"
        -->
        <th-perspectiveCamera
            [position]="camPosition"
            [lookAt]="lookAtPosition" >
            <th-orbitControls></th-orbitControls>
        </th-perspectiveCamera>
    </th-scene>
</th-canvas>